"use strict";(globalThis["webpackChunkbs_fe"]=globalThis["webpackChunkbs_fe"]||[]).push([[754],{84:(e,l,a)=>{a.r(l),a.d(l,{default:()=>fe});a(9665);var o=a(9835),n=a(6970),i=a(499),t=a(1569),d=a(9302),s=a(321),r=a(4182);const u=e=>((0,o.dD)("data-v-66740d1b"),e=e(),(0,o.Cn)(),e),c=u((()=>(0,o._)("div",{class:"q-px-sm"},[(0,o._)("div",{class:"dialogName"},"Add New Folder")],-1))),p={class:"q-px-sm"},m={class:"q-px-sm"},w={__name:"addFolder",emits:[...r.Z.emits],setup(e,{emit:l}){const{dialogRef:a,onDialogCancel:n,onDialogHide:t,onDialogOK:d}=(0,r.Z)(),s=(0,i.iH)("");return(e,l)=>{const r=(0,o.up)("q-card-section"),u=(0,o.up)("q-input"),w=(0,o.up)("q-btn"),f=(0,o.up)("q-card-actions"),g=(0,o.up)("q-card"),_=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(_,{ref_key:"dialogRef",ref:a,onHide:(0,i.SU)(t)},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"q-dialog-plugin"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[c])),_:1}),(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o._)("div",p,[(0,o.Wm)(u,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),dense:"",outlined:"",label:"Name"},null,8,["modelValue"])])])),_:1}),(0,o.Wm)(f,{align:"right"},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(w,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:(0,i.SU)(n)},null,8,["onClick"]),(0,o.Wm)(w,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:l[1]||(l[1]=e=>(0,i.SU)(d)(s.value))})])])),_:1})])),_:1})])),_:1},8,["onHide"])}}};var f=a(1639),g=a(3706),_=a(4458),k=a(3190),v=a(6611),y=a(1821),q=a(4455),h=a(9984),W=a.n(h);const C=(0,f.Z)(w,[["__scopeId","data-v-66740d1b"]]),b=C;W()(w,"components",{QDialog:g.Z,QCard:_.Z,QCardSection:k.Z,QInput:v.Z,QCardActions:y.Z,QBtn:q.Z});var U=a(8407);const Z={class:"row no-wrap items-center q-pa-sm q-gutter-x-xs"},z={class:"col q-px-sm"},x=(0,o._)("div",{class:"q-uploader__title"},"Upload Files",-1),Q={class:"q-uploader__subtitle"},F={__name:"uploadFile",props:{folders:String},setup(e){const l=e,{dialogRef:a,onDialogCancel:s,onDialogHide:u,onDialogOK:c}=(0,r.Z)(),p=(0,d.Z)();function m(e){p.notify({type:"negative",message:`${e.length} file(s) did not pass validation constraints`})}return(e,d)=>{const s=(0,o.up)("q-tooltip"),r=(0,o.up)("q-btn"),u=(0,o.up)("q-spinner"),p=(0,o.up)("q-uploader-add-trigger"),w=(0,o.up)("q-uploader"),f=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(f,{ref_key:"dialogRef",ref:a,persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{class:"uploader",multiple:"",url:`${(0,i.SU)(t.apiUrl)}/files`,accept:"audio/*",headers:[{name:"folders",value:l.folders?l.folders:""}],onRejected:m,onFinish:(0,i.SU)(c)},{header:(0,o.w5)((e=>[(0,o._)("div",Z,[e.queuedFiles.length>0?((0,o.wg)(),(0,o.j4)(r,{key:0,round:"",flat:"",icon:"clear_all",size:"sm",onClick:e.removeQueuedFiles},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Clear All")])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),e.uploadedFiles.length>0?((0,o.wg)(),(0,o.j4)(r,{key:1,round:"",flat:"",icon:"done_all",size:"sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Remove Uploaded Files")])),_:1})])),_:1})):(0,o.kq)("",!0),e.isUploading?((0,o.wg)(),(0,o.j4)(u,{key:2,class:"q-uploader__spinner"})):(0,o.kq)("",!0),(0,o._)("div",z,[x,(0,o._)("div",Q,(0,n.zw)(e.uploadSizeLabel)+" / "+(0,n.zw)(e.uploadProgressLabel),1)]),e.canAddFiles?((0,o.wg)(),(0,o.j4)(r,{key:3,round:"",flat:"",type:"a",icon:"add_box",size:"sm",onClick:e.pickFiles},{default:(0,o.w5)((()=>[(0,o.Wm)(p),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Pick Files")])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),e.canUpload?((0,o.wg)(),(0,o.j4)(r,{key:4,round:"",dense:"",flat:"",icon:"cloud_upload",onClick:e.upload},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Upload Files")])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),e.isUploading?((0,o.wg)(),(0,o.j4)(r,{key:5,round:"",flat:"",icon:"clear",size:"sm",onClick:e.abort},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Abort Upload")])),_:1})])),_:2},1032,["onClick"])):(0,o.kq)("",!0),(0,o.Wm)(r,{round:"",flat:"",color:"blue-grey-2",icon:"close",size:"sm",onClick:(0,i.SU)(c)},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Close")])),_:1})])),_:1},8,["onClick"])])])),_:1},8,["url","headers","onFinish"])])),_:1},512)}}};var D=a(5918),S=a(6858),j=a(3940),H=a(6246);const R=F,N=R;W()(F,"components",{QDialog:g.Z,QUploader:D.Z,QBtn:q.Z,QTooltip:S.Z,QSpinner:j.Z,QUploaderAddTrigger:H.Z});const O={class:"q-px-sm"},P={class:"dialogName"},T={class:"q-px-sm"},V={class:"q-px-sm"},A={__name:"renameFile",props:{current:Object},emits:[...r.Z.emits],setup(e,{emit:l}){const a=e,{dialogRef:t,onDialogCancel:d,onDialogHide:s,onDialogOK:u}=(0,r.Z)(),c=(0,i.iH)(""),p=()=>{c.value?u({oldName:a.current.fileFullPath,newName:`${a.current.dir}/${c.value}${a.current.ext}`}):d()};return(0,o.bv)((()=>{c.value=a.current.name})),(l,a)=>{const r=(0,o.up)("q-card-section"),u=(0,o.up)("q-input"),m=(0,o.up)("q-btn"),w=(0,o.up)("q-card-actions"),f=(0,o.up)("q-card"),g=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(g,{ref_key:"dialogRef",ref:t,onHide:(0,i.SU)(s)},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"q-dialog-plugin"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o._)("div",O,[(0,o._)("div",P," Rename "+(0,n.zw)("folder"===e.current.type?"Folder":"File"),1)])])),_:1}),(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o._)("div",T,[(0,o.Wm)(u,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),dense:"",outlined:"",label:"Name"},null,8,["modelValue"])])])),_:1}),(0,o.Wm)(w,{align:"right"},{default:(0,o.w5)((()=>[(0,o._)("div",V,[(0,o.Wm)(m,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:(0,i.SU)(d)},null,8,["onClick"]),(0,o.Wm)(m,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:p})])])),_:1})])),_:1})])),_:1},8,["onHide"])}}},I=(0,f.Z)(A,[["__scopeId","data-v-269337e0"]]),$=I;W()(A,"components",{QDialog:g.Z,QCard:_.Z,QCardSection:k.Z,QInput:v.Z,QCardActions:y.Z,QBtn:q.Z});const B={class:"q-pa-md"},K={class:"borderd"},L={class:"q-px-md q-py-sm row items-center bg-grey-2"},E={class:"row no-wrap items-center q-gutter-x-sm full-width"},J=(0,o._)("span",{class:"text-h6"},"Files",-1),Y={class:"text-caption q-mt-xs q-ml-md"},G=(0,o._)("span",{class:"q-mx-xs"},"/",-1),M=["onClick"],X={class:"row no-wrap"},ee={key:0},le={key:1},ae={key:2},oe=["onClick"],ne={key:4},ie={__name:"filesPage",setup(e){const l=(0,i.iH)([]),a=(0,i.iH)([]),r=(0,i.iH)([]),u=(0,d.Z)(),c=async()=>{const e=await t.api.get("/files",{params:{folders:a.value.join("/")}});r.value=e.data.files},p=async()=>{u.dialog({component:b}).onOk((async e=>{e&&(u.loading.show(),await t.api.post("/files/newfolder",{folders:a.value.join("/"),name:e}),await c(),u.loading.hide())}))},m=async()=>{l.value.length&&u.dialog({component:U.Z,componentProps:{title:"Remove "+("folder"===l.value[0].type?"Folder":"File"),message:"Are you shure to remove File or Folder?"}}).onOk((async()=>{u.loading.show(),await t.api.delete("/files/remove",{data:{...l.value[0]}}),await c(),u.loading.hide()}))},w=async()=>{u.dialog({component:N,componentProps:{folders:a.value.join("/")}}).onOk((async()=>{u.loading.show(),await c(),u.loading.hide()}))},f=async()=>{if(!l.value.length)return;if("folder"===l.value[0].type)return;u.loading.show();const e=document.createElement("a");e.setAttribute("href",`${t.apiUrl}/files/download/${encodeURIComponent(JSON.stringify(l.value[0]))}`),e.click(),e.remove(),u.loading.hide(),l.value=[]},g=async()=>{u.dialog({component:$,componentProps:{current:l.value[0]}}).onOk((async e=>{(e||Object.keys(e).length)&&(u.loading.show(),console.log(e),await t.api.put("/files/rename",{...e}),await c(),l.value=[],u.loading.hide())}))},_=async e=>{console.log(e),u.loading.show(),a.value.push(e),await c(),u.loading.hide()},k=async e=>{if(u.loading.show(),e){const l=a.value.findIndex((l=>l===e));a.value=a.value.slice(0,l+1),await c()}else a.value=[],await c();u.loading.hide()};return(0,o.bv)((async()=>{u.loading.show(),await c(),u.loading.hide()})),(e,t)=>{const d=(0,o.up)("q-icon"),u=(0,o.up)("q-space"),c=(0,o.up)("q-tooltip"),v=(0,o.up)("q-btn"),y=(0,o.up)("q-separator"),q=(0,o.up)("q-th"),h=(0,o.up)("q-checkbox"),W=(0,o.up)("q-td"),C=(0,o.up)("q-tr"),b=(0,o.up)("q-table");return(0,o.wg)(),(0,o.iD)("div",B,[(0,o._)("div",K,[(0,o._)("div",L,[(0,o._)("div",E,[(0,o.Wm)(d,{name:"folder",size:"20px",color:"primary"}),J,(0,o._)("div",Y,[(0,o._)("span",{class:"cursor-pointer text-underline",onClick:t[0]||(t[0]=e=>k())},"media"),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.value,((e,l)=>((0,o.wg)(),(0,o.iD)("span",{key:l},[G,(0,o._)("span",{class:"cursor-pointer text-underline",onClick:l=>k(e)},(0,n.zw)(e),9,M)])))),128))]),(0,o.Wm)(u),(0,o._)("div",X,[(0,o.Wm)(v,{round:"",flat:"",icon:"create_new_folder",color:"primary",size:"sm",onClick:p},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)("New Folder")])),_:1})])),_:1}),(0,o.Wm)(v,{round:"",flat:"",icon:"upload",color:"primary",size:"sm",onClick:w},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)("File upload")])),_:1})])),_:1}),(0,o.Wm)(v,{round:"",flat:"",icon:"download",color:"primary",size:"sm",onClick:f},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)("File download")])),_:1})])),_:1}),(0,o.Wm)(y,{vertical:"",spaced:"",inset:""}),(0,o.Wm)(v,{round:"",flat:"",icon:"drive_file_rename_outline",color:"primary",size:"sm",onClick:g},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)("File rename")])),_:1})])),_:1}),(0,o.Wm)(v,{round:"",flat:"",icon:"delete_outline",color:"red",size:"sm",onClick:m},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Delete")])),_:1})])),_:1})])])]),(0,o._)("div",null,[(0,o.Wm)(b,{flat:"",dense:"",columns:[{name:"name",label:"Name",field:"name",align:"left",sortable:!0},{name:"type",label:"Type",field:"type",align:"center",sortable:!0},{name:"size",label:"Size",field:"size",align:"center",sortable:!0}],rows:r.value,"row-key":"name",selection:"single",selected:l.value,"onUpdate:selected":t[1]||(t[1]=e=>l.value=e),pagination:{rowsPerPage:0}},{"header-cell-name":(0,o.w5)((e=>[(0,o.Wm)(q,{props:e,style:{width:"60%"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.col.label),1)])),_:2},1032,["props"])])),body:(0,o.w5)((e=>[(0,o.Wm)(C,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{"auto-width":""},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{dense:"",modelValue:e.selected,"onUpdate:modelValue":l=>e.selected=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,o.Wm)(W,{key:"name",props:e},{default:(0,o.w5)((()=>["folder"===e.row.type?((0,o.wg)(),(0,o.iD)("span",ee,[(0,o.Wm)(d,{name:"folder_open",color:"primary",size:"16px"})])):"wav"===e.row.type?((0,o.wg)(),(0,o.iD)("span",le,[(0,o.Wm)(d,{name:"play_arrow",color:"primary",size:"16px"})])):"mp3"===e.row.type?((0,o.wg)(),(0,o.iD)("span",ae,[(0,o.Wm)(d,{name:"play_arrow",color:"primary",size:"16px"})])):(0,o.kq)("",!0),"folder"===e.row.type?((0,o.wg)(),(0,o.iD)("span",{key:3,class:"q-ml-xs text-underline cursor-pointer",onClick:l=>_(e.row.name)},(0,n.zw)(e.row.name),9,oe)):((0,o.wg)(),(0,o.iD)("span",ne,(0,n.zw)(e.row.name),1))])),_:2},1032,["props"]),(0,o.Wm)(W,{key:"type",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.row.type),1)])),_:2},1032,["props"]),(0,o.Wm)(W,{key:"size",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)("folder"!==e.row.type?(0,i.SU)(s.ZP).humanStorageSize(e.row.size):""),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","selected"])])])])}}};var te=a(2857),de=a(136),se=a(926),re=a(7077),ue=a(1682),ce=a(3532),pe=a(7220),me=a(1221);const we=ie,fe=we;W()(ie,"components",{QIcon:te.Z,QSpace:de.Z,QBtn:q.Z,QTooltip:S.Z,QSeparator:se.Z,QTable:re.Z,QTh:ue.Z,QTr:ce.Z,QTd:pe.Z,QCheckbox:me.Z})}}]);
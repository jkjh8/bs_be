"use strict";(globalThis["webpackChunkbs_fe"]=globalThis["webpackChunkbs_fe"]||[]).push([[934],{7453:(e,a,l)=>{l.r(a),l.d(a,{default:()=>F});var d=l(9835),o=l(499),i=l(6970),n=l(9302),s=l(1569),r=l(906),c=l(8382);function t(e=16){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890";let l="";for(let d=0;d<e;d++)l+=a[parseInt(Math.random()*a.length)];return l}function u(){const e=async e=>{const a=await s.api.get("/devices/exists",{params:{value:e}});return console.log(a),!a.data.result||"This value has already been used"};return{fnExist:e}}const p=(0,d._)("div",{class:"text-h6"},"ADD",-1),m={class:"q-px-sm"},v={__name:"deviceAddDialog",emits:[...r.Z.emits],setup(e,{emit:a}){const{required:l,minNumber:i,maxNumber:n,ckIPv4:s}=(0,c.Z)(),{dialogRef:v,onDialogHide:y,onDialogOK:w,onDialogCancel:g}=(0,r.Z)(),f=(0,o.qj)({name:"",deviceId:"",ipaddress:"",port:"",deviceType:{deviceType:"",model:""}}),{fnExist:b}=u(),_=()=>{f.deviceId=t()};return(0,d.bv)((()=>{_()})),(e,a)=>{const i=(0,d.up)("q-card-section"),n=(0,d.up)("q-input"),r=(0,d.up)("q-icon"),c=(0,d.up)("q-select"),t=(0,d.up)("q-btn"),u=(0,d.up)("q-card-actions"),h=(0,d.up)("q-form"),T=(0,d.up)("q-card"),k=(0,d.up)("q-dialog");return(0,d.wg)(),(0,d.j4)(k,{ref_key:"dialogRef",ref:v,onHide:(0,o.SU)(y)},{default:(0,d.w5)((()=>[(0,d.Wm)(T,{class:"q-dialog-plugin"},{default:(0,d.w5)((()=>[(0,d.Wm)(h,{onSubmit:a[6]||(a[6]=e=>(0,o.SU)(w)(f))},{default:(0,d.w5)((()=>[(0,d.Wm)(i,null,{default:(0,d.w5)((()=>[p])),_:1}),(0,d.Wm)(i,null,{default:(0,d.w5)((()=>[(0,d._)("div",m,[(0,d.Wm)(n,{modelValue:f.name,"onUpdate:modelValue":a[0]||(a[0]=e=>f.name=e),dense:"",outlined:"",label:"Name",rules:[(0,o.SU)(l),e=>(0,o.SU)(b)({name:e})],"lazy-rules":""},null,8,["modelValue","rules"]),(0,d.Wm)(n,{modelValue:f.deviceId,"onUpdate:modelValue":a[1]||(a[1]=e=>f.deviceId=e),dense:"",outlined:"",label:"Device Id",rules:[(0,o.SU)(l),e=>(0,o.SU)(b)({deviceId:e})],"lazy-ruls":""},{append:(0,d.w5)((()=>[(0,d.Wm)(r,{class:"cursor-pointer",name:"refresh",color:"primary",onClick:_})])),_:1},8,["modelValue","rules"]),(0,d.Wm)(n,{modelValue:f.ipaddress,"onUpdate:modelValue":a[2]||(a[2]=e=>f.ipaddress=e),dense:"",outlined:"",label:"IP Address",rules:[(0,o.SU)(l),(0,o.SU)(s),e=>(0,o.SU)(b)({ipaddress:e})],"lazy-rules":""},null,8,["modelValue","rules"]),(0,d.Wm)(c,{modelValue:f.deviceType.deviceType,"onUpdate:modelValue":a[3]||(a[3]=e=>f.deviceType.deviceType=e),dense:"",outlined:"",label:"Device Type",options:["Q-SYS","BARIX"],rules:[(0,o.SU)(l)],"lazy-rules":""},null,8,["modelValue","rules"]),"Q-SYS"===f.deviceType.deviceType?((0,d.wg)(),(0,d.j4)(c,{key:0,modelValue:f.deviceType.model,"onUpdate:modelValue":a[4]||(a[4]=e=>f.deviceType.model=e),dense:"",outlined:"",label:"Device Model",options:["Core510","Core110f"],rules:[(0,o.SU)(l)],"lazy-rules":""},null,8,["modelValue","rules"])):(0,d.kq)("",!0),"BARIX"===f.deviceType.deviceType?((0,d.wg)(),(0,d.j4)(c,{key:1,modelValue:f.deviceType.model,"onUpdate:modelValue":a[5]||(a[5]=e=>f.deviceType.model=e),dense:"",outlined:"",label:"Device Model",options:["Instreamer","Extreamer"],rules:[(0,o.SU)(l)],"lazy-rules":""},null,8,["modelValue","rules"])):(0,d.kq)("",!0)])])),_:1}),(0,d.Wm)(u,{align:"right"},{default:(0,d.w5)((()=>[(0,d.Wm)(t,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:(0,o.SU)(g)},null,8,["onClick"]),(0,d.Wm)(t,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",type:"submit"})])),_:1})])),_:1})])),_:1})])),_:1},8,["onHide"])}}};var y=l(3706),w=l(4458),g=l(8326),f=l(3190),b=l(6611),_=l(2857),h=l(8422),T=l(1821),k=l(4455),q=l(9984),W=l.n(q);const D=v,I=D;W()(v,"components",{QDialog:y.Z,QCard:w.Z,QForm:g.Z,QCardSection:f.Z,QInput:b.Z,QIcon:_.Z,QSelect:h.Z,QCardActions:T.Z,QBtn:k.Z});var S=l(8407);const U=[{name:"name",label:"Name",align:"center",field:"name",sortable:!0},{name:"deviceId",label:"Device ID",align:"center",field:"deviceId",sortable:!0},{name:"ipaddress",label:"IP Address",align:"center",field:"ipaddress",sortable:!0},{name:"deviceType",label:"Type",align:"center",field:"deviceType",sortable:!0},{name:"actions",label:"FN",align:"center"}];var Z=l(3746);const V=(0,Z.Q_)("devices",(()=>{const e=(0,n.Z)(),a=(0,o.iH)([]);async function l(l){try{e.loading.show(),await s.api.post("/devices",{...l});const d=await s.api.get("/devices");a.value=d.data.devices,e.loading.hide()}catch(d){e.loading.hide(),console.error(d)}}async function d(){try{e.loading.show();const l=await s.api.get("/devices");a.value=l.data.devices,e.loading.hide()}catch(l){e.loading.hide(),console.error(l)}}async function i(l){try{e.loading.show(),await s.api.delete("/devices",{data:{...l}});const d=await s.api.get("/devices");a.value=d.data.devices,e.loading.hide()}catch(d){e.loading.hide(),console.error(d)}}return{devices:a,updateDevices:d,addDevice:l,removeDevice:i}})),Q={class:"q-pa-md"},C={class:"borderd"},z={class:"q-px-lg q-py-sm row items-center bg-grey-2"},x=(0,d._)("span",{class:"text-h6"},"Devices",-1),A=["href"],N={class:"caption"},P={__name:"devicesPage",setup(e){const a=(0,n.Z)(),l=V(),s=(0,d.Fl)((()=>l.devices)),r=(0,o.iH)(""),c=()=>{a.dialog({component:I}).onOk((async e=>{await l.addDevice(e),await l.updateDevices()}))},t=e=>{a.dialog({component:S.Z,componentProps:{icon:"delete",iconColor:"red",title:"Delete device",message:`Name: ${e.name}, IP_Address: ${e.ipaddress}`}}).onOk((async()=>{await l.removeDevice(e)}))};return(0,d.bv)((async()=>{a.loading.show(),l.updateDevices(),a.loading.hide()})),(e,a)=>{const l=(0,d.up)("q-icon"),n=(0,d.up)("q-btn"),u=(0,d.up)("q-space"),p=(0,d.up)("q-input"),m=(0,d.up)("q-td"),v=(0,d.up)("q-tr"),y=(0,d.up)("q-table");return(0,d.wg)(),(0,d.iD)("div",Q,[(0,d._)("div",C,[(0,d._)("div",z,[(0,d.Wm)(l,{name:"dns",size:"20px",color:"primary"}),x,(0,d.Wm)(n,{round:"",flat:"",icon:"add_circle",color:"primary",onClick:c}),(0,d.Wm)(u),(0,d.Wm)(p,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),borderless:"",dense:"",debounce:"300",clearable:"",placeholder:"Search"},{append:(0,d.w5)((()=>[(0,d.Wm)(l,{name:"search"})])),_:1},8,["modelValue"])]),(0,d.Wm)(y,{flat:"",columns:(0,o.SU)(U),rows:s.value,filter:r.value},{body:(0,d.w5)((e=>[(0,d.Wm)(v,{props:e},{default:(0,d.w5)((()=>[(0,d.Wm)(m,{key:"name",props:e},{default:(0,d.w5)((()=>[(0,d.Uk)((0,i.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,d.Wm)(m,{key:"deviceId",props:e},{default:(0,d.w5)((()=>[(0,d.Uk)((0,i.zw)(e.row.deviceId),1)])),_:2},1032,["props"]),(0,d.Wm)(m,{key:"ipaddress",props:e},{default:(0,d.w5)((()=>[(0,d._)("a",{href:`http://${e.row.ipaddress}`,target:"_blank"},(0,i.zw)(e.row.ipaddress),9,A)])),_:2},1032,["props"]),(0,d.Wm)(m,{key:"deviceType",props:e},{default:(0,d.w5)((()=>[(0,d._)("div",null,(0,i.zw)(e.row.deviceType.deviceType),1),(0,d._)("div",N,(0,i.zw)(e.row.deviceType.model),1)])),_:2},1032,["props"]),(0,d.Wm)(m,{key:"actions",props:e},{default:(0,d.w5)((()=>[(0,d._)("div",null,[(0,d.Wm)(n,{round:"",flat:"",color:"red-10",size:"sm",icon:"delete",onClick:a=>t(e.row)},null,8,["onClick"])])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","filter"])])])}}};var H=l(136),j=l(7580),B=l(3532),R=l(7220);const E=P,F=E;W()(P,"components",{QIcon:_.Z,QBtn:k.Z,QSpace:H.Z,QInput:b.Z,QTable:j.Z,QTr:B.Z,QTd:R.Z})}}]);
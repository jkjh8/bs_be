"use strict";(globalThis["webpackChunkbs_fe"]=globalThis["webpackChunkbs_fe"]||[]).push([[485],{1482:(e,n,a)=>{a.r(n),a.d(n,{default:()=>Qe});var o=a(9835),t=a(499),l=a(6970),i=a(9302),s=a(1569),d=a(1957),c=a(7930);const u={__name:"deviceHeader",props:["device"],setup(e){const{fnRefreshAllQsysStreamAddr:n}=(0,c.n)();return(a,i)=>{const s=(0,o.up)("q-icon"),c=(0,o.up)("q-item-section"),u=(0,o.up)("q-item-label");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(c,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{color:e.device.connected?"primary":"red-10",name:"location_on"},null,8,["color"])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"q-gutter-x-sm"},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,l.zw)(e.device.name),1),(0,o._)("span",null,[(0,o.Wm)(s,{name:"refresh",color:"primary",onClick:i[0]||(i[0]=(0,d.iM)((a=>(0,t.SU)(n)(e.device.deviceId)),["prevent","stop"]))})])])),_:1}),(0,o.Wm)(u,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.device.ipaddress),1)])),_:1})])),_:1})],64)}}};var r=a(1233),m=a(2857),p=a(3115),v=a(9984),_=a.n(v);const w=u,f=w;_()(u,"components",{QItemSection:r.Z,QIcon:m.Z,QItemLabel:p.Z});var g=a(4182);const q={class:"q-px-sm"},Z={class:"dialogName"},z={class:"q-px-sm"},y={class:"q-px-sm"},k={__name:"zoneName",props:{currentName:String,zone:Number},emits:[...g.Z.emits],setup(e,{emit:n}){const a=e,{dialogRef:i,onDialogCancel:s,onDialogHide:d,onDialogOK:c}=(0,g.Z)(),u=(0,t.iH)("");return(0,o.bv)((()=>{a.currentName&&(u.value=a.currentName)})),(n,a)=>{const r=(0,o.up)("q-card-section"),m=(0,o.up)("q-input"),p=(0,o.up)("q-btn"),v=(0,o.up)("q-card-actions"),_=(0,o.up)("q-card"),w=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(w,{ref_key:"dialogRef",ref:i,onHide:(0,t.SU)(d)},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{class:"q-dialog-plugin"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o._)("div",q,[(0,o._)("div",Z,(0,l.zw)(`Modify Zone ${e.zone} Name`),1)])])),_:1}),(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o._)("div",z,[(0,o.Wm)(m,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),dense:"",outlined:"",label:"Name"},null,8,["modelValue"])])])),_:1}),(0,o.Wm)(v,{align:"right"},{default:(0,o.w5)((()=>[(0,o._)("div",y,[(0,o.Wm)(p,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:(0,t.SU)(s)},null,8,["onClick"]),(0,o.Wm)(p,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:a[1]||(a[1]=e=>(0,t.SU)(c)(u.value))})])])),_:1})])),_:1})])),_:1},8,["onHide"])}}};var W=a(1639),x=a(3706),b=a(4458),I=a(3190),U=a(6611),Q=a(1821),S=a(4455);const C=(0,W.Z)(k,[["__scopeId","data-v-79230cce"]]),h=C;_()(k,"components",{QDialog:x.Z,QCard:b.Z,QCardSection:I.Z,QInput:U.Z,QCardActions:Q.Z,QBtn:S.Z});var D=a(5385);const H=(0,o._)("div",{class:"q-px-sm"},[(0,o._)("div",{class:"dialogName"},"방송구간 선택")],-1),N={class:"q-px-sm"},j={__name:"selectBarix",props:{zone:Object},emits:[...g.Z.emits],setup(e,{emit:n}){const a=e,{dialogRef:c,onDialogHide:u,onDialogOK:r,onDialogCancel:m}=(0,g.Z)(),p=(0,i.Z)(),v=(0,t.iH)(null),_=(0,t.iH)([]),w=(e,n,a)=>{n((()=>{_.value=D.b.value.filter((n=>n.name.indexOf(e)>-1))}))},f=()=>{p.notify({type:"negative",icon:"warning",position:"top",message:"네트워크 방송 송출 지역이 이미 사용중입니다."})},q=async()=>{if(null===v.value)r({selected:v.value,ipaddress:""});else{const e=await s.api.get("/devices/qsys/existszone",{params:{id:v.value}});if(e.data&&e.data.value&&e.data.value.length){const n=e.data.value[0].ZoneStatus,o=n.findIndex((e=>e.destination===v.value));return o===a.zone.Zone-1?u():f()}r({selected:v.value,ipaddress:D.b.value[D.b.value.findIndex((e=>e._id===v.value))].ipaddress})}};return(0,o.bv)((async()=>{await(0,D.u)(),_.value=D.b.value,a.zone.destination&&a.zone.destination._id&&(v.value=a.zone.destination._id),console.log(a.zone)})),(e,n)=>{const a=(0,o.up)("q-card-section"),i=(0,o.up)("q-icon"),s=(0,o.up)("q-item-section"),r=(0,o.up)("q-item-label"),p=(0,o.up)("q-item"),f=(0,o.up)("q-select"),g=(0,o.up)("q-btn"),Z=(0,o.up)("q-card-actions"),z=(0,o.up)("q-card"),y=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(y,{ref_key:"dialogRef",ref:c,onHide:(0,t.SU)(u)},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{class:"q-dialog-plugin",style:{"border-radius":"0.6rem"}},{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[H])),_:1}),(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(f,{filled:"",dense:"",modelValue:v.value,"onUpdate:modelValue":n[1]||(n[1]=e=>v.value=e),options:_.value,label:"방송구간선택","option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:w},(0,o.Nv)({option:(0,o.w5)((e=>[(0,o.Wm)(p,(0,l.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(s,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{name:"storage"})])),_:1}),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.opt.name),1)])),_:2},1024),(0,o.Wm)(r,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.opt.ipaddress),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},[v.value?{name:"append",fn:(0,o.w5)((()=>[(0,o.Wm)(i,{name:"cancel",size:"18px",onClick:n[0]||(n[0]=(0,d.iM)((e=>v.value=null),["stop","prevent"])),class:"cursor-pointer"})])),key:"0"}:void 0]),1032,["modelValue","options"])])])),_:1}),(0,o.Wm)(Z,{align:"right"},{default:(0,o.w5)((()=>[(0,o._)("div",N,[(0,o.Wm)(g,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:(0,t.SU)(m)},null,8,["onClick"]),(0,o.Wm)(g,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:q})])])),_:1})])),_:1})])),_:1},8,["onHide"])}}};var O=a(6384),V=a(490);const A=j,B=A;_()(j,"components",{QDialog:x.Z,QCard:b.Z,QCardSection:I.Z,QSelect:O.Z,QIcon:m.Z,QItem:V.Z,QItemSection:r.Z,QItemLabel:p.Z,QCardActions:Q.Z,QBtn:S.Z});var R=a(8269),L=a(7799),T=a(6030);const K=(e,n)=>{let a=L.Us.value[L.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].gain;a+=T.nu.value,a>0&&(a=0),L.Us.value[L.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].gain=a,R.socket.emit("qsys:volume",{deviceId:e,zone:n,value:a})},M=(e,n)=>{let a=L.Us.value[L.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].gain;a-=T.nu.value,a<-100&&(a=-100),L.Us.value[L.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].gain=a,R.socket.emit("qsys:volume",{deviceId:e,zone:n,value:a})},P=(e,n,a)=>{L.Us.value[L.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].mute=a,R.socket.emit("qsys:mute",{deviceId:e,zone:n,value:a})},Y=e=>((0,o.dD)("data-v-01d5b797"),e=e(),(0,o.Cn)(),e),E={class:"row no-wrap items-center"},F={class:"row no-wrap"},G={class:"row no-wrap justify-center items-center q-gutter-x-xs",style:{width:"70px"}},$=Y((()=>(0,o._)("div",{class:"text-grey q-pr-sm"},"VOL",-1))),J={class:"row justify-center"},X={class:"column no-wrap"},ee={__name:"muteAndGain",props:{zone:Object,deviceId:String},setup(e){return(n,a)=>{const i=(0,o.up)("q-btn"),s=(0,o.up)("q-tooltip");return(0,o.wg)(),(0,o.iD)("div",E,[(0,o._)("div",F,[(0,o._)("div",G,[$,(0,o._)("div",J,[(0,o._)("div",null,(0,l.zw)(e.zone.gain),1)])]),(0,o._)("div",X,[(0,o.Wm)(i,{class:"btn",flat:"",icon:"keyboard_arrow_up",size:"xs",onClick:a[0]||(a[0]=n=>(0,t.SU)(K)(e.deviceId,e.zone.Zone))}),(0,o.Wm)(i,{class:"btn",flat:"",icon:"keyboard_arrow_down",size:"xs",onClick:a[1]||(a[1]=n=>(0,t.SU)(M)(e.deviceId,e.zone.Zone))})])]),(0,o.Wm)(i,{round:"",flat:"",icon:e.zone.mute?"volume_off":"volume_up",color:e.zone.mute?"red":"primary",onClick:a[2]||(a[2]=a=>(0,t.SU)(P)(n.device.deviceId,e.zone.Zone,e.zone.mute?0:1))},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Mute")])),_:1})])),_:1},8,["icon","color"])])}}};var ne=a(6858);const ae=(0,W.Z)(ee,[["__scopeId","data-v-01d5b797"]]),oe=ae;_()(ee,"components",{QBtn:S.Z,QTooltip:ne.Z});const te={class:"q-ml-xl q-gutter-x-sm text-caption text-grey justify-start"},le=(0,o._)("div",null,"오디오 출력 디바이스",-1),ie={class:"text-black"},se={key:0,class:"q-gutter-x-sm"},de={key:1},ce={__name:"destinationView",props:{zone:Object,device:Object},setup(e){const n=e,a=(0,i.Z)(),t=()=>{a.dialog({component:B,componentProps:{zone:n.zone}}).onOk((async e=>{await s.api.put("/devices/qsys/zoneupdate",{id:n.device._id,deviceId:n.device.deviceId,zone:n.zone.Zone,destination:e.selected,ipaddress:e.ipaddress}),await(0,L.l4)()}))};return(n,a)=>{const i=(0,o.up)("q-tooltip"),s=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",te,[le,(0,o._)("div",ie,[e.zone.destination?((0,o.wg)(),(0,o.iD)("div",se,[(0,o._)("span",null,(0,l.zw)(e.zone.destination.name),1),(0,o._)("span",null,(0,l.zw)(e.zone.destination.ipaddress),1)])):((0,o.wg)(),(0,o.iD)("div",de,"Local"))])]),(0,o.Wm)(s,{round:"",flat:"",icon:"edit",color:"primary",size:"sm",onClick:a[0]||(a[0]=n=>t(e.zone))},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Edit Destination")])),_:1})])),_:1})],64)}}},ue=ce,re=ue;_()(ce,"components",{QBtn:S.Z,QTooltip:ne.Z});const me=e=>((0,o.dD)("data-v-5836745e"),e=e(),(0,o.Cn)(),e),pe={class:"q-pa-md"},ve={class:"borderd"},_e={class:"q-px-lg q-py-sm row items-center bg-grey-2"},we={class:"row no-wrap items-center q-gutter-x-sm"},fe=me((()=>(0,o._)("span",{class:"text-h6"},"Zone Setup",-1))),ge={class:"q-px-md q-ml-lg"},qe={class:"row no-wrap items-center q-gutter-x-lg"},Ze={style:{width:"150px"}},ze={class:"q-gutter-x-sm"},ye={class:"text-caption text-grey"},ke={__name:"zoneSetupPage",setup(e){const n=(0,i.Z)(),a=(e,a,o)=>{n.dialog({component:h,componentProps:{currentName:e,zone:a}}).onOk((async e=>{n.loading.show();await s.api.put("/devices/qsys/modifiedzonename",{deviceId:o,zone:a,name:e});n.loading.hide()}))};return(0,o.bv)((async()=>{await(0,L.l4)()})),(e,n)=>{const i=(0,o.up)("q-icon"),s=(0,o.up)("q-space"),d=(0,o.up)("q-tooltip"),c=(0,o.up)("q-btn"),u=(0,o.up)("q-avatar"),r=(0,o.up)("q-expansion-item"),m=(0,o.up)("q-list");return(0,o.wg)(),(0,o.iD)("div",pe,[(0,o._)("div",ve,[(0,o._)("div",_e,[(0,o._)("div",we,[(0,o.Wm)(i,{name:"map",size:"20px",color:"primary"}),fe]),(0,o.Wm)(s),(0,o.Wm)(c,{round:"",flat:"",icon:"refresh",color:"primary",onClick:(0,t.SU)(L.l4)},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Refresh Devices")])),_:1})])),_:1},8,["onClick"])]),(0,o._)("div",null,[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,t.SU)(L.Us),((e,n)=>((0,o.wg)(),(0,o.j4)(r,{key:n,"header-class":"q-px-lg bg-blue-grey-1"},{header:(0,o.w5)((()=>[(0,o.Wm)(f,{device:e},null,8,["device"])])),default:(0,o.w5)((()=>[(0,o._)("div",ge,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.ZoneStatus,(n=>((0,o.wg)(),(0,o.iD)("div",{key:n.Zone,class:"row no-wrap items-center q-px-sm"},[(0,o._)("div",qe,[(0,o.Wm)(u,{color:"grey-2",size:"26px"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(n.Zone),1)])),_:2},1024),(0,o._)("div",Ze,[(0,o._)("div",ze,[(0,o._)("span",null,(0,l.zw)(n.name?n.name:"No Name"),1),(0,o.Wm)(c,{round:"",flat:"",icon:"edit",color:"primary",size:"sm",onClick:o=>a(n.name,n.Zone,e.deviceId)},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Edit Name")])),_:1})])),_:2},1032,["onClick"])]),(0,o._)("div",ye,"Zone "+(0,l.zw)(n.Zone),1)]),(0,o.Wm)(re,{zone:n,device:e},null,8,["zone","device"])]),(0,o.Wm)(s),(0,o.Wm)(oe,{zone:n,deviceId:e.deviceId},null,8,["zone","deviceId"])])))),128))])])),_:2},1024)))),128))])),_:1})])])])}}};var We=a(136),xe=a(3246),be=a(651),Ie=a(1357);const Ue=(0,W.Z)(ke,[["__scopeId","data-v-5836745e"]]),Qe=Ue;_()(ke,"components",{QIcon:m.Z,QSpace:We.Z,QBtn:S.Z,QTooltip:ne.Z,QList:xe.Z,QExpansionItem:be.Z,QAvatar:Ie.Z})}}]);